+++
title = "ごあいさつ"
author = ["YAMAGAMI"]
date = 2021-03-26
tags = ["Emacs", "hugo", "ox-hugo", "Netlify", "GitHub"]
categories = ["comp"]
draft = false
toc = true
+++

これまで2年ほどブログ書きは下のようなフローでやってきました。

```text
Emacs > org2blog > WordPress > freenom > AWS
```

しかし

1.  WordPress(WP)ではバージョンアップに追いつくのが大変
2.  サボっていると、画像ファイルが表示されないなどの **トラブル** が頻発
3.  トラブルがあっても自力で十分に対応することができません（非力のため）
4.  SSL対応もしなくちゃならないし・・・
5.  AWSも最初の1年間はほぼ無料でありがたかったけど、その後は年間120ドルほどになって結構 **負担** が大きい

などなどから一念発起。この際、ブログ書きの流れをつぎのように変えようと思いました。

```text
Emacs > org-mode > ox-hugo > Hugo > Netlify > GitHub
```

ところが始めてみるとあちこちに地雷や落とし穴が！ちゃんとした「新装開店」まで　まだ一山も二山もあるかと思います。


## 四苦八苦ログ {#四苦八苦ログ}


### 最大の難関 {#最大の難関}

NetlifyがGitHubレポジトリをデプロイするところでかなりはまりました。ウエッブで調べてみると、とても簡単だったという記事がある一方で、この段階でハマったという記事が英語でも日本語でも多くあります。それらの記事を見ながらほんとうにいろいろやりました。

文字通り四苦八苦しましたが、2021-03-25に初デプロイ成功！。うまくいった理由は

1.  hugoを `hugo_extended_0.81.0_Linux-64bit.deb` にアップしたこと
2.  Netlifyウエブサイトの'Deploy settings'中の'Build settings'の内容をGitHubのサイトルートにしたこと。

    ```text
    Base = bingo/
    　：
    Publish = public
    　：
    ```

などが奏功したんだと思いますが、理屈はよく分かっていません。


### Hugoテーマの変更 {#hugoテーマの変更}

ここでもハマりました。つまらないことですが、テーマによって必要なディレクトリの名称が
postsだったりpostだったり！それ以外にもテーマを変更したときに変更の必要な箇所があちこちに散在しています。分かるまでエラーの嵐との戦いでした。

まったく新規にレポジトリを作ってテーマの設定をまっさらな状態で行えばスムーズなのでしょうが、そうるすとNetlifyのデプロイをやり直さなければなりません。そこでまたハマる。

それから、いったんローカルのある特定のディレクトリでhugo初期化した投稿記事原稿には、環境が変わると変更が必要になるところがたくさんあります。５０本程度の（さほど多くない）記事ですが、手作業ではできないので、その都度スクリプトを書いたりして、結構つかれます。


### Netlifyのドメイン名変更 {#netlifyのドメイン名変更}

ここはまだハマった状態です（笑）。


## 環境 {#環境}

ソフトウエアの環境は次のとおりです。

| Software | Version         |
|----------|----------------:|
| OS       | Ubuntu20.04     |
| Emacs    | 26.3            |
| org-mode | 9.4.4           |
| ox-hugo  | 0.7             |
| hugo     | extended 0.81.0 |
| git      | 2.25.1          |


## Acknowledgment　 {#acknowledgment}

（これはテストページです）