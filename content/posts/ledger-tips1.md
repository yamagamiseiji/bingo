+++
title = "Ledger — 固定費はこれでいっぱつ"
author = ["YAMAGAMI"]
date = 2022-01-01T00:00:00+09:00
tags = ["ledger", "accounting"]
categories = ["comp"]
draft = false
+++

Ledger-cliを使ってこれは便利！というような小技を一つずつ紹介する企画の第1弾です。


## 固定費とは {#固定費とは}

家計でもビジネスでもNPOなどの団体でも、すべての **経済活動体** には
**固定費** (fixed cost/expenses)とよばれる費用がかかります。固定費は金額がカチッと固定しているから固定費と呼ばれるわけではありません。活動体の活動水準とは独立に **定期的** に生じる支出（expenses）のことです[^fn:1]。

いろいろな家計の **やりくりヒント提案** を見ると、内外問わず重要なのは：

```text
「固定費をちゃんと把握して抑制すること」
```

と書かれています（もちろんビジネスの領域でも事情は同じです）。

では家計のなかの固定費とはどんな費目（account）でしょうか。


## 家計における固定費の中身 {#家計における固定費の中身}

家計における固定費はおよそ表[1](#table--tbl-1)のようなものになります。

<a id="table--tbl-1"></a>
<div class="table-caption">
  <span class="table-number"><a href="#table--tbl-1">&#34920; 1</a></span>:
  固定費のおもな費目と具体的な内容例
</div>

| 費目(account) | 具体的内容例       |
|-------------|--------------|
| 住居費      | ローン、固定資産税、家賃など |
| 諸会費      | 年会費、メンバーシップ費など |
| 保険        | 健康保険、生命保険などの保険料 |
| 通信費      | 電話、スマホ、インターネット回線など |
| 水光熱費    | 電気、ガス、水道、灯油など |
| 教養教育費  | 学校、習い事など   |
| 車両費      | 駐車場、税金、定期点検費、車検など |


## 固定費をどのように算出するか {#固定費をどのように算出するか}

表[1](#table--tbl-1)のように多岐にわたる項目の支出をどうやって算出したら良いのでしょうか？

もちろんLedgerでも **腕力** をつかって、表[1](#table--tbl-1) の支出費目（アカウント）を `or` でつないでクエリ（検索・抽出）すればできなくはありません。

```sh
$ ledger reg ^expenses and ( 住居費 or 諸会費 or 保険 or 通信費 or ・・ or 車両費）
```

日常的にこんなことはやってられません。:sunglasses:

家計簿アプリや簡易な経理アプリの多くも、固定費を抽出して計算したり図に書いたりすることがはむずかしいようです（注[^fn:2]）。

さらに悪いことに、この固定費の項目は人によって（企業団体によって）異なります。またライフスタイルの変化にともなって項目も変わってきます。そうした変化への即時的な対応をアプリに求めるのは無理があります。


## Ledgerの解決方法 {#ledgerの解決方法}

Ledgerでは10分未満で、問題は解決します。


## まずは結論から {#まずは結論から}

インターネットで調べ物をしていて偶然、
Ledgerのautomated transactionに関する説明記事の中に次のような記述を見つけました（[出典](https://rolfschr.github.io/gswl-book/latest.html#Automated%5FTransactions)）。

```nil
account FixedCost
= /Rent$/ or /Electricity$/ or /Insurance$/ or /Telephone$/
    (FixedCost)                              1
```

これは目からウロコ、いままでやりたくてもできなかったこと、すなわち固定費をきちんと把握するすることがこれであっという間に可能になるじゃあありませんか。

Ledgerファイルの冒頭かもしくはもし持っていれば `accounts.dat` の冒頭に上にならってautomated transactionを追記します。そして


## 問題発生！ {#問題発生}

仮想アカウントにすると、effective dateが無視される。他の事例で試行してみたがどうも間違いないようだ。これを回避する方法を調査したが、いまのところ発見できていない。もし、これが事実なら使い物にならない。ということは、

```text
固定費をトレースするための独立のスクリプトを作る
```

しかない、ということ。


## Acknowledgements: {#acknowledgements}


## Footnotes: {#footnotes}

[^fn:1]: 固定費に対して、経済活動体の活動水準に関連して増減する支出のことを「変動費variable cost」と呼びます。企業では売上金額、生産量、販売量などが活動水準の指標です。家計でそれに対応する活動は旅行などのレジャー費、医療費、交際費などが該当します。
[^fn:2]: いくつかのアプリではそれを用意しているものがあるそうです.